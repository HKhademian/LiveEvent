buildscript {
	apply from: 'build.versions.gradle'
	apply from: 'build.dependencies.gradle'

	repositories {
		google()
		jcenter()
	}
	dependencies {
		classpath deps.build_gradle
		classpath deps.kotlin.gradle_plugin
	}

	ext {
		travisBuild = System.getenv("TRAVIS") == "true"
		// allows for -Dpre-dex=false to be set
		preDexEnabled = "true".equals(System.getProperty("pre-dex", "true"))
	}
}

allprojects {
	repositories {
		google()
		jcenter()
		maven { url 'https://jitpack.io' }
	}
}

apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'

android {
	compileSdkVersion versions.compile_sdk
	buildToolsVersion versions.build_tools

	sourceSets.each { it.java.srcDirs += "src/${it.name}/kotlin" }

	defaultConfig {
		minSdkVersion versions.min_sdk
		targetSdkVersion versions.target_sdk
	}

	dexOptions {
		// Skip pre-dexing when running on Travis CI or when disabled via -Dpre-dex=false.
		preDexLibraries = preDexEnabled && !travisBuild
	}

	buildTypes {
		debug {
			testCoverageEnabled true
		}
	}
}

dependencies {
	compile deps.kotlin.stdlib

	implementation deps.support.fragment

	implementation deps.arch.lifecycle.runtime
	kapt deps.arch.lifecycle.compiler
	// implementation deps.arch.lifecycle.common_java8
	implementation deps.arch.lifecycle.extensions
}
